{"mappings":"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","sources":["<anon>","src/scripts/eventHandlers.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $5qD1E = parcelRequire(\"5qD1E\");\n\nvar $2UrZ2 = parcelRequire(\"2UrZ2\");\n\nvar $e8aKe = parcelRequire(\"e8aKe\");\n\nvar $ftuQo = parcelRequire(\"ftuQo\");\n// Get references to the cy, info, and walks elements\nconst $c33e153c3b84c13d$var$cyContainer = document.getElementById(\"cy\");\nconst $c33e153c3b84c13d$var$infoPanel = document.getElementById(\"info\");\nconst $c33e153c3b84c13d$var$walksPanel = document.getElementById(\"walks\");\n// Get references to the maximize button and set initial state\nconst $c33e153c3b84c13d$var$maximizeButton = document.getElementById(\"toggleMaximize\");\nlet $c33e153c3b84c13d$var$isMaximized = false;\n// Add click event listener to the maximize button\n$c33e153c3b84c13d$var$maximizeButton.addEventListener(\"click\", ()=>{\n    if ($c33e153c3b84c13d$var$isMaximized) {\n        // Restore previous layout\n        $c33e153c3b84c13d$var$cyContainer.style.width = \"\";\n        $c33e153c3b84c13d$var$cyContainer.style.height = \"\";\n        $c33e153c3b84c13d$var$infoPanel.style.display = \"\";\n        $c33e153c3b84c13d$var$walksPanel.style.display = \"\";\n        $c33e153c3b84c13d$var$isMaximized = false;\n    } else {\n        // Maximize cy panel\n        $c33e153c3b84c13d$var$cyContainer.style.width = \"100%\";\n        $c33e153c3b84c13d$var$cyContainer.style.height = \"100vh\";\n        $c33e153c3b84c13d$var$infoPanel.style.display = \"none\";\n        $c33e153c3b84c13d$var$walksPanel.style.display = \"none\";\n        $c33e153c3b84c13d$var$isMaximized = true;\n    }\n});\nfunction $c33e153c3b84c13d$var$toggleLabels() {\n    // Update labelsVisible state\n    const nodelabelStyle = !(0, $e8aKe.getLabelsVisible)() ? \"data(name)\" : \"\"; // Toggles between showing the name and showing nothing\n    const edgeLabelStyle = !(0, $e8aKe.getLabelsVisible)() ? \"data(weight)\" : \"\"; // Toggles between showing the weight and showing nothing\n    (0, $5qD1E.STATE).cy.style().selector(\"node\") // Select nodes\n    .style({\n        label: nodelabelStyle\n    }).selector(\"edge\") // Select edges\n    .style({\n        label: edgeLabelStyle\n    }).update(); // Important to update the style\n    (0, $e8aKe.setLabelsVisible)(!(0, $e8aKe.getLabelsVisible)());\n}\ndocument.getElementById(\"hiddenLabel\").addEventListener(\"click\", $c33e153c3b84c13d$var$toggleLabels);\ndocument.getElementById(\"captureGraph\").addEventListener(\"click\", ()=>{\n    // Get the base64 representation of the graph\n    const base64Image = (0, $5qD1E.STATE).cy.png();\n    // Create a new anchor element to enable downloading\n    const downloadLink = document.createElement(\"a\");\n    downloadLink.href = base64Image;\n    downloadLink.download = \"graph_capture.png\";\n    // Trigger the download\n    downloadLink.click();\n});\ndocument.getElementById(\"redirectToIgv\").addEventListener(\"click\", ()=>{\n    window.open(\"igv.html\", \"_blank\");\n});\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n    (0, $2UrZ2.resizePanels)();\n});\ndocument.getElementById(\"uploadInput\").addEventListener(\"change\", $c33e153c3b84c13d$var$handleFileUpload);\nfunction $c33e153c3b84c13d$var$handleFileUpload(event) {\n    const file = event.target.files[0];\n    console.log(file);\n    if (file) {\n        const reader = new FileReader();\n        reader.onload = (e)=>{\n            const content = e.target.result;\n            try {\n                const jsonData = JSON.parse(content);\n                console.log(jsonData);\n                // Process and visualize the JSON data\n                // For example: visualizeGraph(jsonData);\n                (0, $5qD1E.loadGraphDataFromServer)(jsonData);\n            } catch (error) {\n                console.error(\"Error parsing JSON:\", error);\n            }\n        };\n        reader.readAsText(file);\n    }\n}\n// Add the clear highlights button event handler\ndocument.getElementById('clearHighlights').addEventListener('click', ()=>{\n    (0, $5qD1E.clearNodeHighlights)((0, $5qD1E.STATE).cy);\n});\n// Gene annotation direct action (if modal doesn't work for some reason)\ndocument.getElementById('geneAnnotationBtn').addEventListener('click', async (e)=>{\n    // Direct annotation without modal\n    if (e.ctrlKey || !window.bootstrap) {\n        e.preventDefault();\n        await $c33e153c3b84c13d$var$handleGeneAnnotation();\n    } else // Bootstrap modal approach\n    try {\n        const modal = new bootstrap.Modal(document.getElementById('geneAnnotationModal'));\n        modal.show();\n    } catch (error) {\n        console.error(\"Error showing modal, falling back to direct annotation:\", error);\n        await $c33e153c3b84c13d$var$handleGeneAnnotation();\n    }\n});\n/**\n * Handle direct gene annotation when modal is unavailable\n */ async function $c33e153c3b84c13d$var$handleGeneAnnotation() {\n    try {\n        console.log(\"Starting gene annotation process directly...\");\n        // Show loading alert - use the global function instead of imported one\n        window.showAlert(\"Loading gene annotations...\", \"info\");\n        // Try loading the gene data \n        const loaded = await (0, $ftuQo.loadGeneData)();\n        if (loaded && (0, $5qD1E.STATE).cy) {\n            console.log(\"Gene data loaded successfully, annotating nodes...\");\n            // Annotate all nodes in the graph\n            const annotatedCount = await (0, $ftuQo.annotateAllNodes)((0, $5qD1E.STATE).cy);\n            // Show success alert with auto-dismiss after 3 seconds - use global function\n            window.showAlert(`Annotated ${annotatedCount} nodes with gene information!`, \"success\", 3000);\n        } else {\n            console.error(\"Could not load gene data or graph not initialized\");\n            window.showAlert(\"Failed to load gene annotations.\", \"error\");\n        }\n    } catch (error) {\n        console.error(\"Error in gene annotation:\", error);\n        window.showAlert(\"Error in gene annotation process.\", \"error\");\n    }\n}\n// Add event handler for Aurora IDs file upload\ndocument.addEventListener('click', (event)=>{\n    if (event.target.id === 'uploadAuroraIds' || event.target.parentElement && event.target.parentElement.id === 'uploadAuroraIds') {\n        const fileInput = document.getElementById('auroraIdsFile');\n        if (fileInput && window.handleAuroraIdsFileUpload) window.handleAuroraIdsFileUpload();\n    }\n});\n// Make the Aurora ID file upload handler globally available\nif (typeof window !== 'undefined' && typeof window.handleAuroraIdsFileUpload === 'undefined' && typeof handleAuroraIdsFileUpload === 'function') window.handleAuroraIdsFileUpload = handleAuroraIdsFileUpload;\n\n\n//# sourceMappingURL=app.f2e395ba.js.map\n","import { STATE, clearNodeHighlights } from \"./graph\";\nimport { resizePanels } from \"./graphUtilities\";\nimport { loadGraphDataFromServer } from \"./graph\";\nimport { getLabelsVisible, setLabelsVisible } from \"./graphSetup\";\nimport { loadGeneData, annotateAllNodes } from \"./geneAnnotation\";\n\n// Get references to the cy, info, and walks elements\nconst cyContainer = document.getElementById(\"cy\");\nconst infoPanel = document.getElementById(\"info\");\nconst walksPanel = document.getElementById(\"walks\");\n\n// Get references to the maximize button and set initial state\nconst maximizeButton = document.getElementById(\"toggleMaximize\");\nlet isMaximized = false;\n\n// Add click event listener to the maximize button\nmaximizeButton.addEventListener(\"click\", () => {\n    if (isMaximized) {\n        // Restore previous layout\n        cyContainer.style.width = \"\";\n        cyContainer.style.height = \"\";\n        infoPanel.style.display = \"\";\n        walksPanel.style.display = \"\";\n        isMaximized = false;\n    } else {\n        // Maximize cy panel\n        cyContainer.style.width = \"100%\";\n        cyContainer.style.height = \"100vh\";\n        infoPanel.style.display = \"none\";\n        walksPanel.style.display = \"none\";\n        isMaximized = true;\n    }\n});\n\nfunction toggleLabels() {\n    // Update labelsVisible state\n    const nodelabelStyle = !getLabelsVisible() ? \"data(name)\" : \"\"; // Toggles between showing the name and showing nothing\n    const edgeLabelStyle = !getLabelsVisible() ? \"data(weight)\" : \"\"; // Toggles between showing the weight and showing nothing\n\n    STATE.cy\n        .style()\n        .selector(\"node\") // Select nodes\n        .style({\n            label: nodelabelStyle,\n        })\n        .selector(\"edge\") // Select edges\n        .style({\n            label: edgeLabelStyle, // Toggles edge labels based on weight\n        })\n        .update(); // Important to update the style\n    setLabelsVisible(!getLabelsVisible());\n}\n\ndocument.getElementById(\"hiddenLabel\").addEventListener(\"click\", toggleLabels);\n\ndocument.getElementById(\"captureGraph\").addEventListener(\"click\", () => {\n    // Get the base64 representation of the graph\n    const base64Image = STATE.cy.png();\n\n    // Create a new anchor element to enable downloading\n    const downloadLink = document.createElement(\"a\");\n    downloadLink.href = base64Image;\n    downloadLink.download = \"graph_capture.png\";\n\n    // Trigger the download\n    downloadLink.click();\n});\n\ndocument.getElementById(\"redirectToIgv\").addEventListener(\"click\", () => {\n    window.open(\"igv.html\", \"_blank\");\n});\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    resizePanels();\n});\n\ndocument\n    .getElementById(\"uploadInput\")\n    .addEventListener(\"change\", handleFileUpload);\n\nfunction handleFileUpload(event) {\n    const file = event.target.files[0];\n    console.log(file);\n    if (file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            const content = e.target.result;\n            try {\n                const jsonData = JSON.parse(content);\n                console.log(jsonData);\n                // Process and visualize the JSON data\n                // For example: visualizeGraph(jsonData);\n                loadGraphDataFromServer(jsonData);\n            } catch (error) {\n                console.error(\"Error parsing JSON:\", error);\n            }\n        };\n        reader.readAsText(file);\n    }\n}\n\n// Add the clear highlights button event handler\ndocument.getElementById('clearHighlights').addEventListener('click', () => {\n    clearNodeHighlights(STATE.cy);\n});\n\n// Gene annotation direct action (if modal doesn't work for some reason)\ndocument.getElementById('geneAnnotationBtn').addEventListener('click', async(e) => {\n    // Direct annotation without modal\n    if (e.ctrlKey || !window.bootstrap) {\n        e.preventDefault();\n        await handleGeneAnnotation();\n    } else {\n        // Bootstrap modal approach\n        try {\n            const modal = new bootstrap.Modal(document.getElementById('geneAnnotationModal'));\n            modal.show();\n        } catch (error) {\n            console.error(\"Error showing modal, falling back to direct annotation:\", error);\n            await handleGeneAnnotation();\n        }\n    }\n});\n\n/**\n * Handle direct gene annotation when modal is unavailable\n */\nasync function handleGeneAnnotation() {\n    try {\n        console.log(\"Starting gene annotation process directly...\");\n\n        // Show loading alert - use the global function instead of imported one\n        window.showAlert(\"Loading gene annotations...\", \"info\");\n\n        // Try loading the gene data \n        const loaded = await loadGeneData();\n\n        if (loaded && STATE.cy) {\n            console.log(\"Gene data loaded successfully, annotating nodes...\");\n            // Annotate all nodes in the graph\n            const annotatedCount = await annotateAllNodes(STATE.cy);\n\n            // Show success alert with auto-dismiss after 3 seconds - use global function\n            window.showAlert(`Annotated ${annotatedCount} nodes with gene information!`, \"success\", 3000);\n        } else {\n            console.error(\"Could not load gene data or graph not initialized\");\n            window.showAlert(\"Failed to load gene annotations.\", \"error\");\n        }\n    } catch (error) {\n        console.error(\"Error in gene annotation:\", error);\n        window.showAlert(\"Error in gene annotation process.\", \"error\");\n    }\n}\n\n// Add event handler for Aurora IDs file upload\ndocument.addEventListener('click', (event) => {\n    if (event.target.id === 'uploadAuroraIds' ||\n        (event.target.parentElement && event.target.parentElement.id === 'uploadAuroraIds')) {\n\n        const fileInput = document.getElementById('auroraIdsFile');\n        if (fileInput && window.handleAuroraIdsFileUpload) {\n            window.handleAuroraIdsFileUpload();\n        }\n    }\n});\n\n// Make the Aurora ID file upload handler globally available\nif (typeof window !== 'undefined' && typeof window.handleAuroraIdsFileUpload === 'undefined' &&\n    typeof handleAuroraIdsFileUpload === 'function') {\n    window.handleAuroraIdsFileUpload = handleAuroraIdsFileUpload;\n}"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$5qD1E","$2UrZ2","$e8aKe","$ftuQo","$c33e153c3b84c13d$var$cyContainer","document","getElementById","$c33e153c3b84c13d$var$infoPanel","$c33e153c3b84c13d$var$walksPanel","$c33e153c3b84c13d$var$maximizeButton","$c33e153c3b84c13d$var$isMaximized","$c33e153c3b84c13d$var$handleGeneAnnotation","console","log","window","showAlert","loaded","loadGeneData","STATE","cy","annotatedCount","annotateAllNodes","error","addEventListener","style","width","height","display","nodelabelStyle","getLabelsVisible","edgeLabelStyle","selector","label","update","setLabelsVisible","base64Image","png","downloadLink","createElement","href","download","click","open","resizePanels","event","file","target","files","reader","FileReader","onload","e","content","result","jsonData","JSON","parse","loadGraphDataFromServer","readAsText","clearNodeHighlights","ctrlKey","bootstrap","preventDefault","modal","Modal","show","parentElement","handleAuroraIdsFileUpload"],"version":3,"file":"app.f2e395ba.js.map"}